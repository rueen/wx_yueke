<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="greeting">
      <text class="greeting-text">{{greeting}}</text>
      <text class="user-name">{{userInfo.nickname}}</text>
    </view>
    <view class="header-actions">
      <view class="quick-book-btn" bindtap="onQuickBook">
        <text class="quick-book-text">çº¦è¯¾</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <!-- çº¦è¯¾æŒ‰é’® -->
    <view class="action-item" bindtap="navigateToBookCourse">
      <view class="action-icon">ğŸ“…</view>
      <text class="action-title">å‘èµ·çº¦è¯¾</text>
      <text class="action-subtitle">å¿«é€Ÿé¢„çº¦{{userType === 'coach' ? 'å­¦å‘˜' : 'æ•™ç»ƒ'}}</text>
    </view>
    
    <!-- å¾…å¤„ç†è¯·æ±‚ -->
    <view class="action-item" bindtap="navigateToPendingRequests" wx:if="{{pendingRequestsCount > 0}}">
      <view class="action-icon">ğŸ””</view>
      <text class="action-title">å¾…å¤„ç†è¯·æ±‚</text>
      <text class="action-subtitle">{{pendingRequestsCount}}ä¸ªçº¦è¯¾è¯·æ±‚</text>
      <view class="badge">{{pendingRequestsCount}}</view>
    </view>
    
    <!-- ä»Šæ—¥è¯¾ç¨‹ -->
    <view class="action-item" bindtap="navigateToSchedule" wx:if="{{todayCoursesCount > 0}}">
      <view class="action-icon">â°</view>
      <text class="action-title">ä»Šæ—¥è¯¾ç¨‹</text>
      <text class="action-subtitle">{{todayCoursesCount}}èŠ‚è¯¾ç¨‹</text>
    </view>

    <!-- æ·»åŠ å­¦å‘˜ï¼ˆæ•™ç»ƒä¸“ç”¨ï¼‰ -->
    <view class="action-item" wx:if="{{userType === 'coach'}}" bindtap="navigateToAddStudent">
      <view class="action-icon">ğŸ‘¥</view>
      <text class="action-title">æ·»åŠ å­¦å‘˜</text>
      <text class="action-subtitle">é‚€è¯·æ–°å­¦å‘˜</text>
    </view>
  </view>

  <!-- è¿‘æœŸè¯¾ç¨‹ -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">è¿‘æœŸè¯¾ç¨‹</view>
      <text class="section-more" bindtap="navigateToSchedule">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="course-list" wx:if="{{courses.length > 0}}">
      <view 
        class="course-item"
        wx:for="{{courses}}"
        wx:key="id"
        bindtap="navigateToCourseDetail"
        data-id="{{item.id}}"
      >
        <view class="course-time">
          <text class="course-date">{{item.dateText}}</text>
          <text class="course-time-range">{{item.timeText}}</text>
        </view>
        <view class="course-info">
          <text class="course-partner">ä¸ {{item.otherUser.nickname}}</text>
          <text class="course-location" wx:if="{{item.location}}">ğŸ“ {{item.location}}</text>
        </view>
        <view class="course-status status-{{item.status}}">
          {{item.statusText}}
        </view>
      </view>
    </view>
    
    <view class="empty-state" wx:else>
      <view class="empty-state-icon">ğŸ“…</view>
      <view class="empty-state-text">æš‚æ— è¿‘æœŸè¯¾ç¨‹</view>
      <view class="empty-state-action">
        <button class="btn btn-primary" bindtap="navigateToBookCourse">å‘èµ·çº¦è¯¾</button>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„{{userType === 'coach' ? 'å­¦å‘˜' : 'æ•™ç»ƒ'}} -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">æˆ‘çš„{{userType === 'coach' ? 'å­¦å‘˜' : 'æ•™ç»ƒ'}}</view>
      <text class="section-more" bindtap="navigateToRelatedUsers">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="user-grid" wx:if="{{relatedUsers.length > 0}}">
      <view 
        class="user-card"
        wx:for="{{relatedUsers}}"
        wx:key="id"
        bindtap="navigateToUserDetail"
        data-id="{{item.id}}"
        data-type="{{userType === 'coach' ? 'student' : 'coach'}}"
      >
        <image class="user-avatar" src="{{item.avatar}}" mode="aspectFill"></image>
        <text class="user-name">{{item.nickname}}</text>
        <text class="user-courses" wx:if="{{userType === 'coach'}}">{{item.coursesLeft || 0}}è¯¾æ—¶</text>
      </view>
    </view>
    
    <view class="empty-state" wx:else>
      <view class="empty-state-icon">ğŸ‘¥</view>
      <view class="empty-state-text">æš‚æ— {{userType === 'coach' ? 'å­¦å‘˜' : 'æ•™ç»ƒ'}}</view>
      <view class="empty-state-action" wx:if="{{userType === 'coach'}}">
        <button class="btn btn-primary" bindtap="navigateToAddStudent">æ·»åŠ å­¦å‘˜</button>
      </view>
    </view>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading" wx:if="{{isLoading}}">
  <text>åŠ è½½ä¸­...</text>
</view> 