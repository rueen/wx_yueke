<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="greeting">
      <text class="greeting-text">{{greeting}}</text>
      <text class="user-name">{{userInfo.nickname}}</text>
    </view>
    <view class="header-actions">
      <view class="quick-book-btn" bindtap="onQuickBook">
        <text class="quick-book-text">çº¦è¯¾</text>
      </view>
    </view>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="courses-section">
    <view class="section-header">
      <text class="section-title">è¿‘æœŸè¯¾ç¨‹</text>
      <text class="section-subtitle">æŒ‰å¼€å§‹æ—¶é—´æ’åº</text>
    </view>

    <!-- è¯¾ç¨‹å¡ç‰‡åˆ—è¡¨ -->
    <view class="courses-list" wx:if="{{courses.length > 0}}">
      <view 
        class="course-card" 
        wx:for="{{courses}}" 
        wx:key="id"
        bindtap="onCourseDetail"
        data-course="{{item}}"
      >
        <view class="course-header">
          <view class="course-time">
            <text class="time-date">{{item.dateText}}</text>
            <text class="time-period">{{item.timeText}}</text>
          </view>
          <view class="course-status">
            <view class="status {{item.statusClass}}">
              <view class="status-dot"></view>
              <text class="status-text">{{item.statusText}}</text>
            </view>
          </view>
        </view>

        <view class="course-content">
          <view class="course-info">
            <view class="user-info">
              <image class="user-avatar" src="{{item.partnerInfo.avatar}}" mode="aspectFill"></image>
              <view class="user-details">
                <text class="user-name">{{item.partnerInfo.nickname}}</text>
                <text class="user-role">{{item.roleText}}</text>
              </view>
            </view>
          </view>

          <view class="course-meta">
            <view class="location" wx:if="{{item.location}}">
              <text class="location-icon">ğŸ“</text>
              <text class="location-text">{{item.location}}</text>
            </view>
            <view class="remark" wx:if="{{item.remark}}">
              <text class="remark-text">{{item.remark}}</text>
            </view>
          </view>
        </view>

        <view class="course-actions" wx:if="{{item.canCancel}}">
          <button 
            class="btn btn-outline btn-small" 
            bindtap="onCancelCourse"
            data-course="{{item}}"
            catchtap="true"
          >
            å–æ¶ˆè¯¾ç¨‹
          </button>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <view class="empty-state-icon">ğŸ“…</view>
      <view class="empty-state-text">æš‚æ— è¯¾ç¨‹</view>
      <view class="empty-state-subtitle">ç‚¹å‡»å³ä¸Šè§’çº¦è¯¾æŒ‰é’®å¼€å§‹çº¦è¯¾</view>
    </view>
  </view>

  <!-- å¿«é€ŸåŠŸèƒ½å…¥å£ -->
  <view class="quick-actions">
    <view class="quick-action-item" bindtap="onViewSchedule">
      <view class="action-icon">ğŸ“‹</view>
      <text class="action-text">è¯¾è¡¨</text>
    </view>
    <view class="quick-action-item" bindtap="onViewRelated">
      <view class="action-icon">ğŸ‘¥</view>
      <text class="action-text">{{userType === 'coach' ? 'æˆ‘çš„å­¦å‘˜' : 'æˆ‘çš„æ•™ç»ƒ'}}</text>
    </view>
    <view class="quick-action-item" bindtap="onViewRequests">
      <view class="action-icon">ğŸ””</view>
      <text class="action-text">å¾…å¤„ç†</text>
      <view class="badge" wx:if="{{pendingCount > 0}}">{{pendingCount}}</view>
    </view>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading" wx:if="{{isLoading}}">
  <text>åŠ è½½ä¸­...</text>
</view> 